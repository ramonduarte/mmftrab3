%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Lachaise Assignment
% LaTeX Template
% Version 1.0 (26/6/2018)
%
% This template originates from:
% http://www.LaTeXTemplates.com
%
% Authors:
% Marion Lachaise & François Févotte
% Vel (vel@LaTeXTemplates.com)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass{article}

\input{structure.tex} % Include the file specifying the document structure and custom commands

%----------------------------------------------------------------------------------------
%	ASSIGNMENT INFORMATION
%----------------------------------------------------------------------------------------

\title{MAE001: Modelagem Matemática em Finanças I} % Title of the assignment

\author{Ramon Duarte de Melo\\ \texttt{ramonduarte@poli.ufrj.br} % Author name and email address
\\ Alex Teixeira\\ \texttt{ramonduarte@poli.ufrj.br}} % Author name and email address

\date{Universidade Federal do Rio de Janeiro (UFRJ) --- \today} % University, school and/or department name(s) and a date

%----------------------------------------------------------------------------------------

\begin{document}

\maketitle % Print the title

%----------------------------------------------------------------------------------------
%	INTRODUCTION
%----------------------------------------------------------------------------------------

\section*{Introdução} % Unnumbered section

O objetivo do Projeto III é implementar, avaliar e comparar o modelo de Black-Scholes com os dados fornecidos pelo mundo real, realizando comparações de cunho matemático-estatístico e produzindo gráficos com tais observações acerca da volatilidade implícita, do preço de corte (\emph{strike price} e dos recortes temporais). 

Para tal, foi utilizada a linguagem \emph{Python 3.6.7}, com os módulos \emph{numpy} (métodos numéricos), \emph{pandas} (manipulação de dados), \emph{scipy} (fórmulas científicas) e \emph{matplotlib.pyplot} (visualização de dados).

Os dados utilizados para a confecção das comparações foi raspado da web utilizando as ferramentas \emph{bs4} (web parsing), \emph{lxml} (HTML parsing) e \emph{re} (expressões regulares). O programa requer a instalação destes módulos, mas possui uma ferramenta de instalação automatizada das dependências (\emph{pipenv}). 

As fontes dos dados são a B3 (Brasil Bolsa Balcão, operadora da Bolsa de Valores de São Paulo) e o jornal Valor Econômico. Todos os dados são referentes ao mercado logo após o fechamento (17:00) do dia 6º de junho de 2019.


O código utilizado neste trabalho, bem como o deste relatório e as imagens geradas, foi aberto e disponibilizado publicamente no repositório https://github.com/ramonduarte/mmftrab3.


%----------------------------------------------------------------------------------------
%	PROBLEM 1
%----------------------------------------------------------------------------------------

\section*{Atividade \emph{a}} % Numbered section

Nesta atividade, foi implementado o algoritmo sugerido no livro em seu capítulo 1.3.
O procedimento é composto de três etapas:

\begin{enumerate}
	\item obtenção dos valores finais, com especial atenção para evitar a explosão combinatória típica do modelo binomial.
	\item cálculo recursivo dos valores intermediários utilizando os valores finais.
	\item dedução do valor inicial $V_{0}$ do contrato, que também representa seu custo pela teoria de precificação da arbitragem.
\end{enumerate}

Os contratos escolhidos possuem os mesmos parâmetros, tanto para a opção de compra, quanto para a opção de venda:

\begin{itemize}
	\item valor inicial do ativo: 4
	\item taxa de valorização: 100%
	\item taxa de desvalorização: 50%
	\item taxa de renda fixa: 25%
	\item preço de \emph{strike}: 5
\end{itemize}

Estes parâmetros foramutilizados junto às probabilidades neutras a risco $\tilde{p} = \tilde{q} = 0.5$.
Foram calculados os valores para 10 simulações, tais que $N = 2^{k}; k = 1, 2, ..., 10$.



\begin{figure}[]
	\includegraphics[width=\linewidth]{Figure_1.png}
	\centering
	
	\caption{Passeios aleatórios com $S_{0} = 100$, $u = 1.024$, $d = 1/u = 0.9765625$ e $p = q = 0.5$.}
	\label{}
\end{figure}

%----------------------------------------------------------------------------------------
%	PROBLEM 2
%----------------------------------------------------------------------------------------


\section*{Atividade b}

Os boxplots foram gerados usando o módulo \emph{matplotlib.pyplot.boxplot}.
Para facilitar a comparação dos boxplots, eles foram agrupados em subplots no mesmo gráfico.
\emph{Outliers} foram marcados com quadrados vermelhos.

\begin{figure}[H]
	\includegraphics[width=\linewidth]{fig1_250.png}
	\centering
	
	\caption{Boxplots com $250$, $500$, $1000$ e $2000$ iterações, respectivamente, de baixo para cima.}
	\label{}
\end{figure}

%----------------------------------------------------------------------------------------
%	PROBLEM 2
%----------------------------------------------------------------------------------------

\section*{Atividade c}

Para esta questão, os boxplots foram refeitos utilizando os parâmetros $\Delta t = 0.25$ e $u = 1/d = \sqrt{1.024}$.
Esta configuração gerou uma variância consideravelmente menor, bem como uma quantidade significativamente menor de \emph{outliers}.
Embora todos os ativos pudessem atingir as mesmas taxas de crescimento e decrescimento que no cenário anterior - apesar das taxas serem menores, o maior número de iterações compensa proporcionalmente a redução -, foram raros os ativos que obtiveram mais de 30\% de variação, um cenário bastante comum na segunda questão.

Este fenômeno foi observado porque, como $E[\bar{S}] = E[S_{0}]$ e $E[S(n)] = E[S(n+1)]$, um número maior de repetições tende a aproximar os resultados da média.
A redução da variância em distribuições probabilísticas por conta da ampliação do espaço amostral é bastante conhecida e documentada. 

\begin{figure}[H]
	\includegraphics[width=\linewidth]{fig3_250.png}
	\centering
	
	\caption{Boxplots com $250$, $500$, $1000$ e $2000$ iterações, respectivamente, de baixo para cima.}
	\label{}
\end{figure}




\end{document}
